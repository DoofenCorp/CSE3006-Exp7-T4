<!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
        integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/fontawesome.min.css">
    <link rel="stylesheet" href="/css/index.css">
    <link rel="icon" href="https://www.svgrepo.com/show/108315/clock.svg" type="image/x-icon">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<title>Server Time Application</title>

<body>
    <nav class="navbar navbar-dark bg-dark center">
        <div class="container-fluid align-content-center">
            <a href="#" class="navbar-brand" id="team-brand">
                <i class="fa-solid fa-people-group"></i>&nbsp; Team 4
            </a>
            <div class="navbar-inner mx-auto" id="navbarNav">
                <ul class="nav navbar-nav">
                    <li class="nav-item text-lg">
                        <a href="#" class="navbar-brand" id="app-brand" aria-current="page">
                            <i class="fa-solid fa-hourglass-start"></i>
                            &nbsp;Server Time Application&nbsp;
                            <i class="fa-solid fa-hourglass-end"></i>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container container-fluid py-3" id="time-box">

        <h1 align="center" id="Title">
            Current server time:
        </h1>
        <h1 id="time" align="center"></h1>
        <h1 id="date" align="center"></h1>
        <h1 id="timezone" align="center"></h1>

    </div>




    <!-- DON'T DELETE THE SCRIPTS -->
    <script src="/socket.io/socket.io.js"></script>
    <script>
        var socket = io();

        socket.on('message', (msg) => {
            document.getElementById("time").innerHTML = "";
            var date = new Date(msg);
            var days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
            var h = date.getHours(); // 0 - 23
            var m = date.getMinutes(); // 0 - 59
            var s = date.getSeconds(); // 0 - 59
            var day = days[date.getDay()];
            var dd = date.getDate();
            var mm = date.getMonth() + 1;
            var yyyy = date.getFullYear();
            var timezone = date.toString().match(/([A-Z]+[\+-][0-9]+.*)/)[1];
            var session = "AM";

            if (h == 0) {
                h = 12;
            }

            if (h > 12) {
                h = h - 12;
                session = "PM";
            }

            h = (h < 10) ? "0" + h : h;
            m = (m < 10) ? "0" + m : m;
            s = (s < 10) ? "0" + s : s;

            var time = h + ":" + m + ":" + s + " " + session;
            var full_date = day + ', ' + dd + '/' + mm + '/' + yyyy;

            document.getElementById("time").innerHTML = "<i class='fa-regular fa-clock'></i> &nbsp;" + time;
            document.getElementById("date").innerHTML = "<i class='fa-solid fa-calendar-days'></i> &nbsp;" + full_date;
            document.getElementById("timezone").innerHTML = "<i class='fa-solid fa-earth-americas'></i> &nbsp;" + timezone;
        })

    </script>
    <!-- DON'T DELETE ABOVE SCRIPTS -->


</body>

</html>